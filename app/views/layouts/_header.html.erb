<div id="bloodhound">
  <input class="typeahead" type="text" placeholder="Search...">
</div>

<%= stylesheet_link_tag("header") %>

<script type="text/javascript">

    var supplement_array = gon.supplement_array;

    var supplement_array = new Bloodhound({
      datumTokenizer: Bloodhound.tokenizers.whitespace,
      queryTokenizer: Bloodhound.tokenizers.whitespace,
      local: supplement_array
    });

    $('#bloodhound .typeahead').typeahead({
      hint: true,
      highlight: true,
      minLength: 1
    },
    {
      name: 'supplement_array',
      source: supplement_array
    }).bind("typeahead:selected", function (obj, datum) {
        // TODO: refactor below to pull slug directly from db instead of using regex (messy)
        var slug = datum.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'');
        location.href = "/supplements/" + slug;
    });

</script>